namespace package.category;

#token_navigation(Option::Some, color = unite)
def macro Success(e: Expression) {
    quote {
        new Result::Success {
            value
        }
    }
}

#token_navigation(Option::None, color = unite)
def macro Failure(e: Expression) {
    ¶ {
        new Result::Failure {
            §error
        }
    }
}

#documentation(include="Result.vnote")
unite Result[T, E] raise T {
    ///
    Success {
        ///
        value: T
    },
    ///
    Failure {
        ///
        error: E
    },
}

let yin, yang = (
    callcc { c }.then { print('@') },
    callcc { c }.then { print('*') },
)

yin(yang)